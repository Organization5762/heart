<?xml version='1.0' encoding='utf-8'?>
<svg xmlns="http://www.w3.org/2000/svg" width="1408" height="660" viewBox="0 0 1408 660">
  <defs>
    <style>text { font-family: 'Inter', 'Helvetica Neue', Arial, sans-serif; fill: #0f172a; }
.column-title { font-size: 16px; font-weight: 600; }
.edge-label { font-size: 12px; fill: #1f2937; background: #ffffff; }
</style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto" markerUnits="strokeWidth">
      <path d="M 0 0 L 10 3.5 L 0 7 z" fill="#1f2937" />
    </marker>
  </defs>
  <g>
    <rect x="64.00" y="48.00" width="260.00" height="318.00" rx="18" fill="#e2e8f0" stroke="#cbd5f5" />
    <text x="194.00" y="74.00" text-anchor="middle" class="column-title">Launch &amp; Configuration Services</text>
  </g>
  <g>
    <rect x="404.00" y="48.00" width="260.00" height="400.00" rx="18" fill="#e2e8f0" stroke="#cbd5f5" />
    <text x="534.00" y="74.00" text-anchor="middle" class="column-title">GameLoop Orchestration</text>
  </g>
  <g>
    <rect x="744.00" y="48.00" width="260.00" height="564.00" rx="18" fill="#e2e8f0" stroke="#cbd5f5" />
    <text x="874.00" y="74.00" text-anchor="middle" class="column-title">Peripheral &amp; Signal Services</text>
  </g>
  <g>
    <rect x="1084.00" y="48.00" width="260.00" height="482.00" rx="18" fill="#e2e8f0" stroke="#cbd5f5" />
    <text x="1214.00" y="74.00" text-anchor="middle" class="column-title">Display &amp; Device Services</text>
  </g>
  <g fill="none" stroke="#1f2937" stroke-width="1.6">
    <path d="M 194.00 174.00 C 194.00 183.00 194.00 183.00 194.00 192.00" marker-end="url(#arrowhead)" />
    <path d="M 194.00 256.00 C 194.00 265.00 194.00 265.00 194.00 274.00" marker-end="url(#arrowhead)" />
    <path d="M 306.00 306.00 C 346.00 306.00 382.00 142.00 422.00 142.00" marker-end="url(#arrowhead)" />
    <path d="M 306.00 306.00 C 346.00 306.00 382.00 224.00 422.00 224.00" marker-end="url(#arrowhead)" />
    <path d="M 534.00 174.00 C 534.00 183.00 534.00 183.00 534.00 192.00" marker-end="url(#arrowhead)" />
    <path d="M 534.00 174.00 C 534.00 265.00 534.00 265.00 534.00 356.00" marker-end="url(#arrowhead)" />
    <path d="M 534.00 256.00 C 534.00 265.00 534.00 265.00 534.00 274.00" marker-end="url(#arrowhead)" />
    <path d="M 534.00 338.00 C 534.00 347.00 534.00 347.00 534.00 356.00" marker-end="url(#arrowhead)" />
    <path d="M 646.00 388.00 C 686.00 388.00 1062.00 142.00 1102.00 142.00" marker-end="url(#arrowhead)" />
    <path d="M 1214.00 174.00 C 1214.00 183.00 1214.00 183.00 1214.00 192.00" marker-end="url(#arrowhead)" />
    <path d="M 1214.00 174.00 C 1214.00 224.00 1214.00 224.00 1214.00 274.00" marker-end="url(#arrowhead)" />
    <path d="M 1214.00 338.00 C 1214.00 347.00 1214.00 347.00 1214.00 356.00" marker-end="url(#arrowhead)" />
    <path d="M 1214.00 420.00 C 1214.00 429.00 1214.00 429.00 1214.00 438.00" marker-end="url(#arrowhead)" />
    <path d="M 646.00 142.00 C 686.00 142.00 722.00 142.00 762.00 142.00" marker-end="url(#arrowhead)" />
    <path d="M 874.00 174.00 C 874.00 183.00 874.00 183.00 874.00 192.00" marker-end="url(#arrowhead)" />
    <path d="M 874.00 174.00 C 874.00 224.00 874.00 224.00 874.00 274.00" marker-end="url(#arrowhead)" />
    <path d="M 874.00 174.00 C 874.00 265.00 874.00 265.00 874.00 356.00" marker-end="url(#arrowhead)" />
    <path d="M 874.00 174.00 C 874.00 306.00 874.00 306.00 874.00 438.00" marker-end="url(#arrowhead)" />
    <path d="M 874.00 174.00 C 874.00 347.00 874.00 347.00 874.00 520.00" marker-end="url(#arrowhead)" />
    <path d="M 762.00 224.00 C 722.00 224.00 686.00 224.00 646.00 224.00" marker-end="url(#arrowhead)" />
    <path d="M 762.00 306.00 C 722.00 306.00 686.00 224.00 646.00 224.00" marker-end="url(#arrowhead)" />
    <path d="M 762.00 388.00 C 722.00 388.00 686.00 224.00 646.00 224.00" marker-end="url(#arrowhead)" />
    <path d="M 762.00 470.00 C 722.00 470.00 686.00 224.00 646.00 224.00" marker-end="url(#arrowhead)" />
    <path d="M 762.00 552.00 C 722.00 552.00 686.00 224.00 646.00 224.00" marker-end="url(#arrowhead)" />
  </g>
  <rect x="289.50" y="241.00" width="149.00" height="20.00" rx="4" fill="#ffffff" stroke="#d1d5db" opacity="0.95" />
  <text x="364.00" y="251.00" text-anchor="middle" dominant-baseline="middle" class="edge-label">adds modes &amp; scenes</text>
  <g>
    <rect x="82.00" y="110.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="194.00" y="142.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="194.00">CLI (Typer `totem run`)</tspan>
    </text>
    <rect x="82.00" y="192.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="194.00" y="224.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="194.00">Configuration Registry</tspan>
    </text>
    <rect x="82.00" y="274.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="194.00" y="297.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="194.00">Program Configuration</tspan>
      <tspan x="194.00" dy="18">`configure(loop)`</tspan>
    </text>
    <rect x="422.00" y="110.00" width="224.00" height="64.00" rx="12" fill="#1d4ed8" stroke="#1d4ed8" />
    <text x="534.00" y="133.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="534.00">GameLoop Service</tspan>
      <tspan x="534.00" dy="18">(start + main loop)</tspan>
    </text>
    <rect x="422.00" y="192.00" width="224.00" height="64.00" rx="12" fill="#1d4ed8" stroke="#1d4ed8" />
    <text x="534.00" y="224.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="534.00">AppController / Mode Router</tspan>
    </text>
    <rect x="422.00" y="274.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="534.00" y="306.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="534.00">Mode Services &amp; Renderers</tspan>
    </text>
    <rect x="422.00" y="356.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="534.00" y="379.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="534.00">Frame Composer</tspan>
      <tspan x="534.00" dy="18">(surface merge + timing)</tspan>
    </text>
    <rect x="762.00" y="110.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="133.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">PeripheralManager</tspan>
      <tspan x="874.00" dy="18">(background threads)</tspan>
    </text>
    <rect x="762.00" y="192.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="224.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">Switch / BluetoothSwitch</tspan>
    </text>
    <rect x="762.00" y="274.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="306.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">Gamepad</tspan>
    </text>
    <rect x="762.00" y="356.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="388.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">Accelerometer / Phyphox</tspan>
    </text>
    <rect x="762.00" y="438.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="470.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">HeartRateManager</tspan>
    </text>
    <rect x="762.00" y="520.00" width="224.00" height="64.00" rx="12" fill="#0369a1" stroke="#0369a1" />
    <text x="874.00" y="552.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="874.00">PhoneText</tspan>
    </text>
    <rect x="1102.00" y="110.00" width="224.00" height="64.00" rx="12" fill="#7c3aed" stroke="#7c3aed" />
    <text x="1214.00" y="133.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="1214.00">Display Service</tspan>
      <tspan x="1214.00" dy="18">pygame.display.flip</tspan>
    </text>
    <rect x="1102.00" y="192.00" width="224.00" height="64.00" rx="12" fill="#7c3aed" stroke="#7c3aed" />
    <text x="1214.00" y="224.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="1214.00">LocalScreen Window</tspan>
    </text>
    <rect x="1102.00" y="274.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="1214.00" y="297.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="1214.00">Frame Capture</tspan>
      <tspan x="1214.00" dy="18">(share surface)</tspan>
    </text>
    <rect x="1102.00" y="356.00" width="224.00" height="64.00" rx="12" fill="#0f172a" stroke="#0f172a" />
    <text x="1214.00" y="388.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="1214.00">Device Bridge</tspan>
    </text>
    <rect x="1102.00" y="438.00" width="224.00" height="64.00" rx="12" fill="#7c3aed" stroke="#7c3aed" />
    <text x="1214.00" y="461.00" fill="#f8fafc" text-anchor="middle">
      <tspan x="1214.00">LEDMatrix Driver</tspan>
      <tspan x="1214.00" dy="18">(rgbmatrix)</tspan>
    </text>
  </g>
</svg>