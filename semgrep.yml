rules:
  - id: heart-no-print
    languages:
      - python
    message: Use heart.utilities.logging.get_logger instead of print for runtime diagnostics.
    severity: ERROR
    patterns:
      - pattern: print(...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-wildcard-import
    languages:
      - python
    message: Avoid wildcard imports to keep dependencies explicit.
    severity: ERROR
    patterns:
      - pattern: from $MODULE import *
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-module-all
    languages:
      - python
    message: Avoid module-level __all__ exports; prefer explicit imports at call sites.
    severity: ERROR
    patterns:
      - pattern-either:
          - pattern: __all__ = [...]
          - pattern: __all__ = (...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-os-path-join
    languages:
      - python
    message: Prefer pathlib.Path over os.path.join for path construction.
    severity: ERROR
    patterns:
      - pattern: os.path.join(...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-baseexception-catch
    languages:
      - python
    message: Avoid catching BaseException so system-exiting signals propagate.
    severity: ERROR
    patterns:
      - pattern: |
          try:
            ...
          except BaseException:
            ...
    paths:
      include:
        - src/**/*.py
    metadata:
      category: error-handling
      technology:
        - python
  - id: heart-no-logging-getlogger
    languages:
      - python
    message: Use heart.utilities.logging.get_logger instead of logging.getLogger.
    severity: ERROR
    patterns:
      - pattern-either:
          - pattern: logging.getLogger(...)
          - pattern: getLogger(...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-require-open-encoding-default
    languages:
      - python
    message: Specify encoding= when opening text files (prefer utf-8).
    severity: ERROR
    patterns:
      - pattern: open($PATH)
      - pattern-not: open($PATH, encoding=..., ...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-require-open-encoding-text-mode
    languages:
      - python
    message: Specify encoding= when opening text files (prefer utf-8).
    severity: ERROR
    patterns:
      - pattern: open($PATH, $MODE, ...)
      - pattern-not: open($PATH, $MODE, encoding=..., ...)
      - metavariable-regex:
          metavariable: $MODE
          regex: "^[\"'](?!.*b).*?[\"']$"
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-bare-exception-raise
    languages:
      - python
    message: Raise a specific exception type instead of a bare Exception.
    severity: ERROR
    patterns:
      - pattern: raise Exception(...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: error-handling
      technology:
        - python
  - id: heart-no-text-open-without-encoding
    languages:
      - python
    message: Specify an explicit encoding when reading or writing text files.
    severity: ERROR
    patterns:
      - pattern-either:
          - pattern: open($FILE)
          - pattern: open($FILE, $MODE, ...)
      - metavariable-regex:
          metavariable: $MODE
          regex: ^["']?[rwa]([t+])?["']?$
      - pattern-not: open($FILE, encoding=$ENCODING, ...)
      - pattern-not: open($FILE, $MODE, ..., encoding=$ENCODING, ...)
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
  - id: heart-no-path-concat
    languages:
      - python
    message: Avoid string concatenation for filesystem paths; use pathlib.Path.
    severity: ERROR
    patterns:
      - pattern-either:
          - pattern: $LEFT + "/" + $RIGHT
          - pattern: f"{$LEFT}/{$RIGHT}"
    paths:
      include:
        - src/**/*.py
    metadata:
      category: style
      technology:
        - python
